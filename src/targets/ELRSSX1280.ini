# ********************************
# STM32L4 + SX1280 Transmitter Target
# ********************************

[env:ELRSSX1280TX_via_STLINK]
extends = env_common_stm32, radio_2400
board = l432kb
board_upload.maximum_size = 131072
build_flags =
    ${env_common_stm32.build_flags}
    ${radio_2400.build_flags}
    ${common_env_data.build_flags_tx}
    -include target/ELRSSX1280TX.h
    -D HSI_VALUE=16000000U
    -D VECT_TAB_OFFSET=0x0U
    -D FLASH_APP_OFFSET=0x0U
    -Wl,--defsym=FLASH_APP_OFFSET=0
build_src_filter = ${env_common_stm32.build_src_filter} -<rx_*.cpp>

# -------------------------------------------------
# DFU target â€“ MUST NOT inherit from STLINK!
# -------------------------------------------------
[env:ELRSSX1280TX_via_DFU]
extends = env:ELRSSX1280TX_via_STLINK